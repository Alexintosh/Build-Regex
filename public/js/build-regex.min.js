function buildExpression(){expression=new VerEx,$conditions_container.find(".row").each(function(){var t=$(this),e=t.find(".match-options").val(),i=t.find(".match-param").val();$.inArray(e,options_without_params)>-1?expression[e]():expression[e](i)}),0==$conditions_container.children().length&&(expression=""),$("#expression").find("span").text(expression)}+function(t){"use strict";var e=function(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,n)};e.DEFAULTS={loadingText:"loading..."},e.prototype.setState=function(t){var e="disabled",i=this.$element,n=i.is("input")?"val":"html",o=i.data();t+="Text",o.resetText||i.data("resetText",i[n]()),i[n](o[t]||this.options[t]),setTimeout(function(){"loadingText"==t?i.addClass(e).attr(e,e):i.removeClass(e).removeAttr(e)},0)},e.prototype.toggle=function(){var t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var e=this.$element.find("input").prop("checked",!this.$element.hasClass("active"));"radio"===e.prop("type")&&t.find(".active").removeClass("active")}this.$element.toggleClass("active")};var i=t.fn.button;t.fn.button=function(i){return this.each(function(){var n=t(this),o=n.data("button"),r="object"==typeof i&&i;o||n.data("bs.button",o=new e(this,r)),"toggle"==i?o.toggle():i&&o.setState(i)})},t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=i,this},t(document).on("click.bs.button.data-api","[data-toggle^=button]",function(e){var i=t(e.target);i.hasClass("btn")||(i=i.closest(".btn")),i.button("toggle"),e.preventDefault()})}(window.jQuery),+function(t){"use strict";function e(){t(n).remove(),t(o).each(function(e){var n=i(t(this));n.hasClass("open")&&(n.trigger(e=t.Event("hide.bs.dropdown")),e.isDefaultPrevented()||n.removeClass("open").trigger("hidden.bs.dropdown"))})}function i(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}var n=".dropdown-backdrop",o="[data-toggle=dropdown]",r=function(e){t(e).on("click.bs.dropdown",this.toggle)};r.prototype.toggle=function(n){var o=t(this);if(!o.is(".disabled, :disabled")){var r=i(o),s=r.hasClass("open");if(e(),!s){if("ontouchstart"in document.documentElement&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e),r.trigger(n=t.Event("show.bs.dropdown")),n.isDefaultPrevented())return;r.toggleClass("open").trigger("shown.bs.dropdown")}return o.focus(),!1}},r.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var n=t(this);if(e.preventDefault(),e.stopPropagation(),!n.is(".disabled, :disabled")){var r=i(n),s=r.hasClass("open");if(!s||s&&27==e.keyCode)return 27==e.which&&r.find(o).focus(),n.click();var a=t("[role=menu] li:not(.divider):visible a",r);if(a.length){var d=a.index(a.filter(":focus"));38==e.keyCode&&d>0&&d--,40==e.keyCode&&a.length-1>d&&d++,~d||(d=0),a.eq(d).focus()}}}};var s=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var i=t(this),n=i.data("dropdown");n||i.data("dropdown",n=new r(this)),"string"==typeof e&&n[e].call(i)})},t.fn.dropdown.Constructor=r,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=s,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",o,r.prototype.toggle).on("keydown.bs.dropdown.data-api",o+", [role=menu]",r.prototype.keydown)}(window.jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]}}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one(t.support.transition.end,function(){i=!0});var o=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(o,e),this},t(function(){t.support.transition=e()})}(window.jQuery),function(t){t.fn.dragsort=function(e){if("destroy"==e)return t(this.selector).trigger("dragsort-uninit"),void 0;var i=t.extend({},t.fn.dragsort.defaults,e),n=[],o=null,r=null;return this.each(function(e,s){t(s).is("table")&&1==t(s).children().size()&&t(s).children().is("tbody")&&(s=t(s).children().get(0));var a={draggedItem:null,placeHolderItem:null,pos:null,offset:null,offsetLimit:null,scroll:null,container:s,init:function(){var n=0==t(this.container).children().size()?"li":t(this.container).children(":first").get(0).tagName.toLowerCase();""==i.itemSelector&&(i.itemSelector=n),""==i.dragSelector&&(i.dragSelector=n),""==i.placeHolderTemplate&&(i.placeHolderTemplate="<"+n+">&nbsp;</"+n+">"),t(this.container).attr("data-listidx",e).mousedown(this.grabItem).bind("dragsort-uninit",this.uninit),this.styleDragHandlers(!0)},uninit:function(){var e=n[t(this).attr("data-listidx")];t(e.container).unbind("mousedown",e.grabItem).unbind("dragsort-uninit"),e.styleDragHandlers(!1)},getItems:function(){return t(this.container).children(i.itemSelector)},styleDragHandlers:function(e){this.getItems().map(function(){return t(this).is(i.dragSelector)?this:t(this).find(i.dragSelector).get()}).css("cursor",e?"pointer":"")},grabItem:function(e){if(!(1!=e.which||t(e.target).is(i.dragSelectorExclude)||t(e.target).closest(i.dragSelectorExclude).size()>0||0==t(e.target).closest(i.itemSelector).size())){e.preventDefault();for(var o=e.target;!t(o).is(i.dragSelector);){if(o==this)return;o=o.parentNode}t(o).attr("data-cursor",t(o).css("cursor")),t(o).css("cursor","move");var r=n[t(this).attr("data-listidx")],s=this,a=function(){r.dragStart.call(s,e),t(r.container).unbind("mousemove",a)};t(r.container).mousemove(a).mouseup(function(){t(r.container).unbind("mousemove",a),t(o).css("cursor",t(o).attr("data-cursor"))})}},dragStart:function(e){null!=o&&null!=o.draggedItem&&o.dropItem(),o=n[t(this).attr("data-listidx")],o.draggedItem=t(e.target).closest(i.itemSelector),o.draggedItem.attr("data-origpos",t(this).attr("data-listidx")+"-"+o.getItems().index(o.draggedItem));var r=parseInt(o.draggedItem.css("marginTop")),s=parseInt(o.draggedItem.css("marginLeft"));if(o.offset=o.draggedItem.offset(),o.offset.top=e.pageY-o.offset.top+(isNaN(r)?0:r)-1,o.offset.left=e.pageX-o.offset.left+(isNaN(s)?0:s)-1,!i.dragBetween){var a=0==t(o.container).outerHeight()?Math.max(1,Math.round(.5+o.getItems().size()*o.draggedItem.outerWidth()/t(o.container).outerWidth()))*o.draggedItem.outerHeight():t(o.container).outerHeight();o.offsetLimit=t(o.container).offset(),o.offsetLimit.right=o.offsetLimit.left+t(o.container).outerWidth()-o.draggedItem.outerWidth(),o.offsetLimit.bottom=o.offsetLimit.top+a-o.draggedItem.outerHeight()}var d=o.draggedItem.height(),l=o.draggedItem.width();if("tr"==i.itemSelector?(o.draggedItem.children().each(function(){t(this).width(t(this).width())}),o.placeHolderItem=o.draggedItem.clone().attr("data-placeholder",!0),o.draggedItem.after(o.placeHolderItem),o.placeHolderItem.children().each(function(){t(this).css({borderWidth:0,width:t(this).width()+1,height:t(this).height()+1}).html("&nbsp;")})):(o.draggedItem.after(i.placeHolderTemplate),o.placeHolderItem=o.draggedItem.next().css({height:d,width:l}).attr("data-placeholder",!0)),"td"==i.itemSelector){var c=o.draggedItem.closest("table").get(0);t("<table id='"+c.id+"' style='border-width: 0px;' class='dragSortItem "+c.className+"'><tr></tr></table>").appendTo("body").children().append(o.draggedItem)}var h=o.draggedItem.attr("style");o.draggedItem.attr("data-origstyle",h?h:""),o.draggedItem.css({position:"absolute",opacity:.8,"z-index":999,height:d,width:l}),o.scroll={moveX:0,moveY:0,maxX:t(document).width()-t(window).width(),maxY:t(document).height()-t(window).height()},o.scroll.scrollY=window.setInterval(function(){if(i.scrollContainer!=window)return t(i.scrollContainer).scrollTop(t(i.scrollContainer).scrollTop()+o.scroll.moveY),void 0;var e=t(i.scrollContainer).scrollTop();(o.scroll.moveY>0&&o.scroll.maxY>e||0>o.scroll.moveY&&e>0)&&(t(i.scrollContainer).scrollTop(e+o.scroll.moveY),o.draggedItem.css("top",o.draggedItem.offset().top+o.scroll.moveY+1))},10),o.scroll.scrollX=window.setInterval(function(){if(i.scrollContainer!=window)return t(i.scrollContainer).scrollLeft(t(i.scrollContainer).scrollLeft()+o.scroll.moveX),void 0;var e=t(i.scrollContainer).scrollLeft();(o.scroll.moveX>0&&o.scroll.maxX>e||0>o.scroll.moveX&&e>0)&&(t(i.scrollContainer).scrollLeft(e+o.scroll.moveX),o.draggedItem.css("left",o.draggedItem.offset().left+o.scroll.moveX+1))},10),t(n).each(function(t,e){e.createDropTargets(),e.buildPositionTable()}),o.setPos(e.pageX,e.pageY),t(document).bind("mousemove",o.swapItems),t(document).bind("mouseup",o.dropItem),i.scrollContainer!=window&&t(window).bind("DOMMouseScroll mousewheel",o.wheel)},setPos:function(e,n){var r=n-this.offset.top,s=e-this.offset.left;if(i.dragBetween||(r=Math.min(this.offsetLimit.bottom,Math.max(r,this.offsetLimit.top)),s=Math.min(this.offsetLimit.right,Math.max(s,this.offsetLimit.left))),this.draggedItem.parents().each(function(){if("static"!=t(this).css("position")&&(!t.browser.mozilla||"table"!=t(this).css("display"))){var e=t(this).offset();return r-=e.top,s-=e.left,!1}}),i.scrollContainer==window)n-=t(window).scrollTop(),e-=t(window).scrollLeft(),n=Math.max(0,n-t(window).height()+5)+Math.min(0,n-5),e=Math.max(0,e-t(window).width()+5)+Math.min(0,e-5);else{var a=t(i.scrollContainer),d=a.offset();n=Math.max(0,n-a.height()-d.top)+Math.min(0,n-d.top),e=Math.max(0,e-a.width()-d.left)+Math.min(0,e-d.left)}o.scroll.moveX=0==e?0:e*i.scrollSpeed/Math.abs(e),o.scroll.moveY=0==n?0:n*i.scrollSpeed/Math.abs(n),this.draggedItem.css({top:r,left:s})},wheel:function(e){if((t.browser.safari||t.browser.mozilla)&&o&&i.scrollContainer!=window){var n=t(i.scrollContainer),r=n.offset();if(e.pageX>r.left&&e.pageX<r.left+n.width()&&e.pageY>r.top&&e.pageY<r.top+n.height()){var s=e.detail?5*e.detail:e.wheelDelta/-2;n.scrollTop(n.scrollTop()+s),e.preventDefault()}}},buildPositionTable:function(){var e=[];this.getItems().not([o.draggedItem[0],o.placeHolderItem[0]]).each(function(i){var n=t(this).offset();n.right=n.left+t(this).outerWidth(),n.bottom=n.top+t(this).outerHeight(),n.elm=this,e[i]=n}),this.pos=e},dropItem:function(){if(null!=o.draggedItem){var e=o.draggedItem.attr("data-origstyle");return o.draggedItem.attr("style",e),""==e&&o.draggedItem.removeAttr("style"),o.draggedItem.removeAttr("data-origstyle"),o.styleDragHandlers(!0),o.placeHolderItem.before(o.draggedItem),o.placeHolderItem.remove(),t("[data-droptarget], .dragSortItem").remove(),window.clearInterval(o.scroll.scrollY),window.clearInterval(o.scroll.scrollX),o.draggedItem.attr("data-origpos")!=t(n).index(o)+"-"+o.getItems().index(o.draggedItem)&&i.dragEnd.apply(o.draggedItem),o.draggedItem.removeAttr("data-origpos"),o.draggedItem=null,t(document).unbind("mousemove",o.swapItems),t(document).unbind("mouseup",o.dropItem),i.scrollContainer!=window&&t(window).unbind("DOMMouseScroll mousewheel",o.wheel),!1}},swapItems:function(e){if(null==o.draggedItem)return!1;o.setPos(e.pageX,e.pageY);for(var s=o.findPos(e.pageX,e.pageY),a=o,d=0;-1==s&&i.dragBetween&&n.length>d;d++)s=n[d].findPos(e.pageX,e.pageY),a=n[d];if(-1==s)return!1;var l=function(){return t(a.container).children().not(a.draggedItem)},c=l().not(i.itemSelector).each(function(){this.idx=l().index(this)});return null==r||r.top>o.draggedItem.offset().top||r.left>o.draggedItem.offset().left?t(a.pos[s].elm).before(o.placeHolderItem):t(a.pos[s].elm).after(o.placeHolderItem),c.each(function(){var e=l().eq(this.idx).get(0);this!=e&&l().index(this)<this.idx?t(this).insertAfter(e):this!=e&&t(this).insertBefore(e)}),t(n).each(function(t,e){e.createDropTargets(),e.buildPositionTable()}),r=o.draggedItem.offset(),!1},findPos:function(t,e){for(var i=0;this.pos.length>i;i++)if(t>this.pos[i].left&&this.pos[i].right>t&&e>this.pos[i].top&&this.pos[i].bottom>e)return i;return-1},createDropTargets:function(){i.dragBetween&&t(n).each(function(){var e=t(this.container).find("[data-placeholder]"),n=t(this.container).find("[data-droptarget]");e.size()>0&&n.size()>0?n.remove():0==e.size()&&0==n.size()&&("td"==i.itemSelector?t(i.placeHolderTemplate).attr("data-droptarget",!0).appendTo(this.container):t(this.container).append(o.placeHolderItem.removeAttr("data-placeholder").clone().attr("data-droptarget",!0)),o.placeHolderItem.attr("data-placeholder",!0))})}};a.init(),n.push(a)}),this},t.fn.dragsort.defaults={itemSelector:"",dragSelector:"",dragSelectorExclude:"input, textarea",dragEnd:function(){},dragBetween:!1,placeHolderTemplate:"",scrollContainer:window,scrollSpeed:5}}(jQuery),function(){function t(){var e=Object.create(RegExp.prototype);return e=RegExp.apply(e,arguments)||e,t.injectClassMethods(e),e}function e(){return new t}var i=this;t.injectClassMethods=function(e){for(var i in t.prototype)t.prototype.hasOwnProperty(i)&&(e[i]=t.prototype[i]);return e},t.prototype={_prefixes:"",_source:"",_suffixes:"",_modifiers:"",sanitize:function(t){return t.source?t.source:t.replace(/[^\w]/g,function(t){return"\\"+t})},add:function(t){return this._source+=t||"",this.compile(this._prefixes+this._source+this._suffixes,this._modifiers),this},startOfLine:function(t){return t=0!=t,this._prefixes=t?"^":"",this.add(""),this},endOfLine:function(t){return t=0!=t,this._suffixes=t?"$":"",this.add(""),this},then:function(t){return t=this.sanitize(t),this.add("(?:"+t+")"),this},find:function(t){return this.then(t)},maybe:function(t){return t=this.sanitize(t),this.add("(?:"+t+")?"),this},anything:function(){return this.add("(?:.*)"),this},anythingBut:function(t){return t=this.sanitize(t),this.add("(?:[^"+t+"]*)"),this},something:function(){return this.add("(?:.+)"),this},somethingBut:function(t){return t=this.sanitize(t),this.add("(?:[^"+t+"]+)"),this},replace:function(t,e){return t=""+t,t.replace(this,e)},lineBreak:function(){return this.add("(?:(?:\\n)|(?:\\r\\n))"),this},br:function(){return this.lineBreak()},tab:function(){return this.add("\\t"),this},word:function(){return this.add("\\w+"),this},anyOf:function(t){return t=this.sanitize(t),this.add("["+t+"]"),this},any:function(t){return this.anyOf(t)},range:function(){var t="[";console.log(arguments);for(var e=0;arguments.length>e;e+=2){var i=e+1;if(o>=arguments.length)break;var n=this.sanitize(arguments[e]),o=this.sanitize(arguments[i]);t+=n+"-"+o}return t+="]",this.add(t),this},addModifier:function(t){return-1==this._modifiers.indexOf(t)&&(this._modifiers+=t),this.add(""),this},removeModifier:function(t){return this._modifiers=this._modifiers.replace(t,""),this.add(""),this},withAnyCase:function(t){return 0!=t?this.addModifier("i"):this.removeModifier("i"),this.add(""),this},stopAtFirst:function(t){return 0!=t?this.removeModifier("g"):this.addModifier("g"),this.add(""),this},searchOneLine:function(t){return 0!=t?this.removeModifier("m"):this.addModifier("m"),this.add(""),this},multiple:function(t){switch(t=t.source?t.source:this.sanitize(t),t.substr(-1)){case"*":case"+":break;default:t+="+"}return this.add(t),this},or:function(t){return this._prefixes+="(?:",this._suffixes=")"+this._suffixes,this.add(")|(?:"),t&&this.then(t),this},beginCapture:function(){return this._suffixes+=")",this.add("(",!1),this},endCapture:function(){return this._suffixes=this._suffixes.substring(0,this._suffixes.length-1),this.add(")",!0),this}},"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define(t):i.VerEx=e}.call();var $conditions_container=$("#conditions"),row_html=$("#row-template").html(),tester,options_without_params=["anything","endOfLine","lineBreak","something","startOfLine","tab","word"],match_options={add:"Add",any:"Any",anyOf:"Any Of",anything:"Anything",anythingBut:"Anything But",endOfLine:"End of Line",find:"Find",lineBreak:"Line Break",maybe:"Maybe",or:"Or",something:"Something",somethingBut:"Something But",startOfLine:"Start of Line",tab:"Tab",then:"Then",word:"Word"};$("#new-condition").on("click",function(){$("<div />",{"class":"row"}).html(row_html).find("select").chain(function(){var t=$(this);$.each(match_options,function(e,i){$("<option />",{value:e}).text(i).appendTo(t)})}).on("change",function(){$.inArray($(this).val(),options_without_params)>-1?$(this).parents(".row").find("input").attr("disabled","disabled"):$(this).parents(".row").find("input").removeAttr("disabled"),$(document).trigger("update-expression")}).end().find(".match-param").on("keyup",function(){$(document).trigger("update-expression")}).end().find(".remove-match-option").on("click",function(){$(this).parents(".row").remove(),$(document).trigger("update-expression")}).end().appendTo($conditions_container)}).one("click",function(){$(document).trigger("first-row-created")}),$(document).on({"first-row-created":function(){$conditions_container.dragsort({dragSelector:".move-match-option",dragSelectorExclude:"select, input",dragEnd:function(){$(document).trigger("update-expression")}})},"update-expression":function(){buildExpression()}}),$.fn.chain=function(t){return t.apply(this),this};